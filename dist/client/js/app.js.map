{"version":3,"sources":["webpack:///./utils/ua.ts","webpack:///./constant.ts","webpack:///./config.ts","webpack:///./utils/api.ts","webpack:///./Reducer/Global.ts","webpack:///./Reducer/index.ts","webpack:///./Store/index.ts","webpack:///./common.ts","webpack:///./Component/Bundle.tsx","webpack:///./Route/index.tsx","webpack:///./Page/index.tsx","webpack:///./Component/RouteWrapper.tsx","webpack:///./Action/Global.ts","webpack:///./Hoc/WithLogin.tsx","webpack:///./App.tsx","webpack:///./index.tsx","webpack:///./assets/share_cover.jpg"],"names":["ua","navigator","userAgent","lang","language","toLowerCase","isIPhone","indexOf","utils_ua","isIE","isOpera","isWebKit","isFireFox","isMobile","match","isIOS","isAndroid","isIPad","isWebApp","isWeiBo","isWeiXin","isUC","isQQ","isSafari","isLizhiFM","LizhiJSBridge","selectPlatform","includes","screen","height","width","cookiePrefix","wxidKey","wbidKey","wxJsConfUrl","wxAuthUrl","lzAuthUrl","wxConfig","_a","window","location","link","protocol","host","pathname","search","axios_default","url","params","currentURL","then","res","data","wx","config","debug","appId","appid","timestamp","nonceStr","signature","jsApiList","ResponseStateEnum","axiosInstance","a","create","ResponseStructure","interceptors","response","use","Promise","resolve","error","reject","msg","SUCCESS","HttpMethods","api","rMap","Object","keys","reduce","fMap","key","some","v","startsWith","_b","split","method","request","assign","toUpperCase","apiConfig","getCity","listLuckyDoy","trans","initState","isLogin","exports","errMsg","token","Reducer_Global","state","action","type","__assign","concat","Reducer","redux","Global","middleware","redux_logger","Store","apply","REDUX_STATE","onWXBridgeReady","ready","onMenuShareAppMessage","shareData","onMenuShareTimeline","__webpack_require__","e","require","fundebug","apikey","releasestage","sampleRate","silentHttp","filters","message","target","tagName","bind","catch","oe","fastclick_default","attach","document","body","isApp","isWX","platform","documentElement","setAttribute","isPre","dataKey","get","getState","href","title","desc","image-url","imgUrl","lz","apiList","eventList","call","ret","console","log","WeixinJSBridge","addEventListener","_hmt","hm","createElement","src","s","getElementsByTagName","parentNode","insertBefore","Bundle_Bundle","_super","Bundle","props","_this","this","mod","__extends","prototype","componentWillMount","load","componentWillReceiveProps","nextProps","di","setState","default","render","children","react","activity_indicator_default","toast","text","propTypes","prop_types","isRequired","Route_0","path","component","Component","displayName","name","LoadedComponent","Bundle_createComponent","Index","Page_extends","componentDidMount","test","className","exact","Component_RouteWrapper","RouteWrapper","RouteWrapper_extends","componentDidUpdate","prevProps","scrollTo","animateCls","history","react_default","react_addons_css_transition_group_default","transitionName","transitionEnterTimeout","transitionLeaveTimeout","Fragment","cloneElement","toggleAuthStatus","collectErrMsg","setToken","Hoc_WithLogin","force","Wrapped","WithLoginComponent","WithLogin_extends","applyLogin","__awaiter","undefined","cookies","lib","sent","getSessionUser","r1","id","p","on","gotoLogin","set","getToken","needRefresh","r2","status","encodeURIComponent","WithLogin_applyLogin","prop_types_default","bool","es","dispatch","Action_Global_namespaceObject","Router","hash","length","HashRouter","BrowserRouter","basename","App_App","App","App_extends","Route","react_router_config_es","rcRender","react_dom_default","react_hot_loader","store","getElementById","index_render","module"],"mappings":"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","file":"client/js/app.js?e7eee5dda5980de5d0b1","sourcesContent":["const ua = navigator.userAgent;\nconst lang = navigator.language.toLowerCase();\n\nfunction isIE() {\n  // IE内核\n  return ua.indexOf('Trident') > -1;\n}\n\nfunction isOpera() {\n  // opera内核\n  return ua.indexOf('Presto') > -1;\n}\n\nfunction isWebKit() {\n  // 苹果/谷歌内核\n  return ua.indexOf('AppleWebKit') > -1;\n}\n\nfunction isFireFox() {\n  // 火狐内核\n  return ua.indexOf('Gecko') > -1 && ua.indexOf('KHTML') === -1;\n}\n\nfunction isMobile() {\n  // 移动终端\n  return !!ua.match(/AppleWebKit.*Mobile.*/);\n}\n\nfunction isIOS() {\n  // ios终端\n  return !!ua.match(/\\(i[^;]+;( U;)? CPU.+Mac OS X/);\n}\n\nfunction isAndroid() {\n  // android终端/uc浏览器\n  return ua.indexOf('Android') > -1 || ua.indexOf('Linux') > -1;\n}\n\nfunction isIPhone() {\n  // iPhone/QQHD浏览器\n  return ua.indexOf('iPhone') > -1;\n}\n\nfunction isIPad() {\n  // iPad\n  return ua.indexOf('iPad') > -1;\n}\n\nfunction isWebApp() {\n  // web应该程序，没有头部与底部\n  return ua.indexOf('Safari') === -1;\n}\n\nfunction isWeiBo() {\n  // 微博\n  return !!ua.match(/Weibo/i);\n}\n\nfunction isWeiXin() {\n  // 微信\n  return !!ua.match(/MicroMessenger/i);\n}\n\nfunction isUC() {\n  // uc\n  return !!ua.match(/UCBrowser/i);\n}\n\nfunction isQQ() {\n  // qq\n  return !!ua.match(/QQBrowser/i);\n}\n\nfunction isSafari() {\n  // safari\n  return !!ua.match(/Safari/i);\n}\n\nfunction isLizhiFM() {\n  // lizhifm\n  if (ua.match(/LizhiFM/i) !== null) {\n    return true;\n  }\n  if (typeof LizhiJSBridge !== 'undefined') {\n    return true;\n  }\n\n  return false;\n}\n\nfunction selectPlatform() {\n  if (isIPhone()) {\n    if ([812, 724, 690].includes(screen.height) && screen.width === 375) {\n      return 'IPhoneX';\n    }\n    return 'IPhone';\n  } else if (screen.width < 768) {\n    return 'Android';\n  }\n  return 'Desktop';\n}\n\nexport default {\n  ua,\n  lang,\n  isIE,\n  isOpera,\n  isWebKit,\n  isFireFox,\n  isMobile,\n  isIOS,\n  isAndroid,\n  isIPhone,\n  isIPad,\n  isWebApp,\n  isWeiBo,\n  isWeiXin,\n  isUC,\n  isQQ,\n  isSafari,\n  isLizhiFM,\n  selectPlatform,\n};\n","export const cookiePrefix = 'base_cityfm_hangzhou_single_dog_';\nexport const tokenKey = `${cookiePrefix}token`;\nexport const idKey = `${cookiePrefix}id`;\nexport const wxidKey = `${cookiePrefix}wxid`;\nexport const wbidKey = `${cookiePrefix}wbid`;\n\nexport const wxJsConfUrl = '//oauthbiz.lizhi.fm/weixin/jsconfig?tag=cityfm';\nexport const wxAuthUrl = '//oauthbiz.lizhi.fm/weixin/auth?tag=cityfm';\nexport const lzAuthUrl = 'https://h5security.lizhi.fm/jsBridgeConfig/get';\nexport const fundebugApiKey = '294a8593da2207207c592dcd7364e84e913b366ca32bd592002dfc068c568f58';\nexport const baiduTongjiID = '50f7f3f779102291f22b776ad51e5893';\n\nexport const baseUrlPath = process.env.NODE_ENV === 'production' ? '/hangzhou/singleDog' : '/';\n","import axios from 'axios';\nimport { lzAuthUrl, wxJsConfUrl } from './constant';\n\nexport function wxConfig() {\n  const {\n    protocol, host, pathname, search,\n  } = window.location;\n  const link = `${protocol}//${host}${pathname}${search}`;\n\n  axios({\n    url: wxJsConfUrl,\n    params: {\n      currentURL: link,\n    },\n  }).then((res) => {\n    const { data } = res.data;\n\n    if (!data) {\n      return;\n    }\n\n    wx.config({\n      debug: false, // 开启调试模式,调用的所有api的返回值会在客户端alert出来，若要查看传入的参数，可以在pc端打开，参数信息会通过log打出，仅在pc端时才会打印。\n      appId: data.appid, // 必填，公众号的唯一标识\n      timestamp: data.timestamp, // 必填，生成签名的时间戳\n      nonceStr: data.nonceStr, // 必填，生成签名的随机串\n      signature: data.signature, // 必填，签名，见附录1\n      jsApiList: [\n        'checkJsApi',\n        'onMenuShareTimeline',\n        'onMenuShareAppMessage',\n        'onMenuShareQQ',\n        'onMenuShareWeibo',\n        'hideMenuItems',\n        'showMenuItems',\n        'hideAllNonBaseMenuItem',\n        'showAllNonBaseMenuItem',\n        'translateVoice',\n        'startRecord',\n        'stopRecord',\n        'onRecordEnd',\n        'playVoice',\n        'pauseVoice',\n        'stopVoice',\n        'uploadVoice',\n        'downloadVoice',\n        'chooseImage',\n        'previewImage',\n        'uploadImage',\n        'downloadImage',\n        'getNetworkType',\n        'openLocation',\n        'getLocation',\n        'hideOptionMenu',\n        'showOptionMenu',\n        'closeWindow',\n        'scanQRCode',\n        'chooseWXPay',\n        'openProductSpecificView',\n        'addCard',\n        'chooseCard',\n        'openCard',\n      ], // 必填，需要使用的JS接口列表，所有JS接口列表见附录2\n    });\n  });\n}\n\nexport function appConfig() {\n  lz.config({\n    debug: false,\n    url: lzAuthUrl,\n    apiList: [\n      'getToken',\n      'getSessionUser',\n      'gotoLogin',\n      'shareUrl',\n      'startRecordVoice',\n      'stopRecordVoice',\n      'uploadRecordVoice',\n      'replayRecordVoice',\n      'shareImage',\n      'saveImage',\n    ],\n    eventList: ['user:login', 'recordStateChange'],\n  });\n}\n","import axios, { AxiosPromise, AxiosResponse, AxiosError, AxiosStatic } from 'axios';\n\nexport const axiosInstance = axios.create();\n\n// 后端返回的数据结构体,默认是{status:xx,data:xx,msg:xx}\n// 有些可能返回的是{rCode:xx,data:xx,message:xx}},根据项目而定\n// 如果项目同时有多种结构体，可以考虑做成数组\nconst ResponseStructure = {\n  status: 'status',\n  data: 'data',\n  msg: 'msg',\n};\n\n// 后端返回的状态码\nenum ResponseStateEnum {\n  SUCCESS = 0,\n  NO_LOGIN = 2,\n}\n\n// 添加响应拦截器\naxiosInstance.interceptors.response.use(\n  (response: AxiosResponse) => Promise.resolve(response.data), // 避免每次都要写res.data.xxx\n  (error: AxiosError) => Promise.reject(error),\n);\n\n// 添加响应拦截器\naxiosInstance.interceptors.response.use(\n  response => {\n    const { status, msg } = ResponseStructure;\n    if (response[status] === ResponseStateEnum.SUCCESS) {\n      return Promise.resolve(response);\n    }\n    return Promise.reject(response[msg]);\n  },\n  error => Promise.reject(error),\n);\n\nconst HttpMethods = ['GET', 'POST', 'PUT', 'DELETE'];\n\ninterface CustomResponse {\n  code: number;\n  data: any;\n  msg: string;\n}\n\ntype axiosMap<T> = { [P in keyof T]?: (args: any) => AxiosPromise<CustomResponse> };\n\nfunction apiConfig<T>(rMap: T) {\n  return Object.keys(rMap).reduce<axiosMap<T>>((fMap, key) => {\n    fMap[key] = (data, config = {}) => {\n      if (typeof rMap[key] === 'string') {\n        if (HttpMethods.some(v => rMap[key].startsWith(v))) {\n          const [method, url] = rMap[key].split(' ');\n          return axiosInstance.request(\n            Object.assign(config, {\n              url,\n              method,\n              [method.toUpperCase() === 'GET' ? 'params' : 'data']: data,\n            }),\n          );\n        }\n        return axiosInstance.request(Object.assign(config, { url: rMap[key], params: data }));\n      }\n      return axiosInstance.request(Object.assign(rMap[key], { data }));\n    };\n    return fMap;\n  }, {});\n}\n\nconst fMap = {\n  getCity: 'GET /hangzhou/singleDog/getCity',\n  listLuckyDoy: 'POST /activity/listLuckyDoy',\n  trans: 'GET //oauthbiz.lizhi.fm/checkAppTrans',\n};\n\ntype ApiMap = typeof fMap;\n\nconst API = apiConfig<ApiMap>(fMap);\n\nexport default API;\n","export interface GlobalStateType {\n  isLogin: boolean;\n  errMsg: string[];\n  token: string;\n}\n\nconst initState: GlobalStateType = {\n  isLogin: typeof exports === 'object', // 如果是服务端渲染则设置初始值为true,在服务端获取api失败时置为false\n  errMsg: [],\n  token: ''\n};\n\nconst Global = (state = initState, action) => {\n  switch (action.type) {\n  case 'toggleAuthStatus':\n    return {\n      ...state,\n      isLogin: action.isLogin,\n    };\n  case 'errMsg':\n    return {\n      ...state,\n      errMsg: [...state.errMsg, action.msg],\n    };\n  case 'setToken':\n    return {\n      ...state,\n      token: action.token,\n    };\n  default:\n    return state;\n  }\n};\n\nexport default Global;\n","import { combineReducers } from 'redux';\nimport Global, { GlobalStateType } from './Global';\n\nexport interface AppStoreType {\n  Global: GlobalStateType;\n}\n\nconst rootReducer = combineReducers({\n  Global,\n});\n\nexport default rootReducer;\n","import { createStore, applyMiddleware, compose } from 'redux';\n// import thunk from 'redux-thunk';\nimport { createLogger } from 'redux-logger';\nimport rootReducer from '../Reducer';\n\nconst logger = createLogger();\n\n// const middleware = [thunk].concat(process.env.NODE_ENV === 'development' ? [logger] : []);\nconst middleware = [logger];\n\nconst initState = typeof window === 'object' ? window.REDUX_STATE : {};\n\nexport const configureStore = (state) => {\n  const store = createStore(\n    rootReducer,\n    state || {},\n    compose(applyMiddleware(...middleware)),\n  );\n\n  if (module.hot) {\n    module.hot.accept('../Reducer', () => {\n      store.replaceReducer(rootReducer);\n    });\n  }\n  return store;\n};\n\nexport default configureStore(initState);\n","import './styles/global.less';\nimport FastClick from 'fastclick';\nimport client from 'utils/ua';\nimport { wxConfig, appConfig } from './config';\nimport { fundebugApiKey, baiduTongjiID } from './constant';\nimport { axiosInstance } from 'utils/api';\nimport store from 'Store';\nimport get from 'lodash-es/get';\n\nrequire.ensure([], function(require) {\n  const fundebug: any = require('fundebug-javascript');\n  fundebug.apikey = fundebugApiKey;\n  fundebug.releasestage = process.env.NODE_ENV;\n  fundebug.sampleRate = 0.3;\n  fundebug.silentHttp = true;\n  fundebug.filters = [\n    {\n      message: /^Script error\\.$/,\n    },\n    {\n      message: /Network Error/,\n    },\n    {\n      message: /JSBridge/,\n    },\n    {\n      target: {\n        tagName: /^IMG$/,\n      },\n    },\n  ];\n});\n\nFastClick.attach(document.body);\n\nwindow.isApp = client.isLizhiFM();\nwindow.isWX = client.isWeiXin();\nwindow.isWeiBo = client.isWeiBo();\nwindow.platform = client.selectPlatform();\ndocument.documentElement.setAttribute('data-platform', window.platform);\nwindow.debug = location.search.includes('debug');\nwindow.isPre = location.host.includes('pre') || location.search.includes('pre');\n\n// 添加请求拦截器\naxiosInstance.interceptors.request.use((config) => {\n  if (window.isApp) {\n    const { method } = config;\n    const dataKey = method === 'get' ? 'params' : 'data';\n    Object.assign(config, {\n      [dataKey]: Object.assign(config[dataKey] || {}, { token: get(store.getState(), ['Global', 'token']) }),\n    });\n  }\n  return config;\n});\n\nwindow.shareData = {\n  url: window.location.href,\n  link: window.location.href,\n  title: '全国单身踢馆歌手大赛',\n  desc: '妈耶！单身汪怎么可以手撕情侣档？画面惨不忍睹……',\n  'image-url': require('./assets/share_cover.jpg'),\n  imgUrl: require('./assets/share_cover.jpg'),\n};\n\n// console.log(window.shareData);\n\nif (window.isApp) {\n  appConfig();\n  lz.ready(() => {\n    LizhiJSBridge.call('configShareUrl', {\n      url: window.shareData.url, // 分享的url\n      title: window.shareData.title, // 分享标题\n      desc: window.shareData.desc, // 分享的描述\n      'image-url': window.shareData.imgUrl, // 分享的图片\n    }, (ret) => {\n      console.log(ret);\n    });\n  });\n}\n\nfunction onWXBridgeReady() {\n  wxConfig();\n  wx.ready(() => {\n    wx.onMenuShareAppMessage(window.shareData);\n    wx.onMenuShareTimeline(window.shareData);\n  });\n}\nif (window.isWX) {\n  if (typeof WeixinJSBridge === 'undefined') {\n    document.addEventListener('WeixinJSBridgeReady', onWXBridgeReady, false);\n  } else {\n    onWXBridgeReady();\n  }\n}\n\nwindow._hmt = window._hmt || [];\n(function () {\n  const hm = document.createElement('script');\n  hm.src = `https://hm.baidu.com/hm.js?${baiduTongjiID}`;\n  const s = document.getElementsByTagName('script')[0];\n  s.parentNode.insertBefore(hm, s);\n}());\n","import * as React from 'react';\nimport * as PropTypes from 'prop-types';\nimport { ActivityIndicator } from 'antd-mobile';\n\ninterface BundlePropType {\n  load: (args: any) => void;\n  children: (args: React.ComponentType) => JSX.Element;\n}\n\ninterface BundleStateType {\n  mod: React.ComponentType;\n}\n\nclass Bundle extends React.Component<BundlePropType, BundleStateType> {\n  static propTypes = {\n    load: PropTypes.func.isRequired,\n    children: PropTypes.func.isRequired,\n  };\n  constructor(props) {\n    super(props);\n    this.state = {\n      // short for \"module\" but that's a keyword in js, so \"mod\"\n      mod: null,\n    };\n  }\n  componentWillMount() {\n    this.load(this.props);\n  }\n\n  componentWillReceiveProps(nextProps) {\n    if (nextProps.load !== this.props.load) {\n      this.load(nextProps);\n    }\n  }\n\n  load(di: BundlePropType) {\n    this.setState({\n      mod: null,\n    });\n    // 加载完bundle-loader之后cb\n    di.load((mod) => {\n      this.setState({\n        // handle both es imports and cjs\n        mod: mod.default ? mod.default : mod,\n      });\n    });\n  }\n\n  render() {\n    return this.state.mod ? this.props.children(this.state.mod) : (<ActivityIndicator toast text='Loading...' />);\n  }\n}\n\n// components load their module for initial visit\n// 这里只是给this.props.child传一个方法，最后在Bundle的render里面调用\n// 如果传入的就是组件的话就直接返回,兼容服务端渲染\nexport const createComponent = Component =>\n  ((Component.displayName || Component.name)\n    ? Component\n    : props => (\n      <Bundle load={Component}>\n        {LoadedComponent => <LoadedComponent {...props} />}\n      </Bundle>\n    ));\n\nexport default Bundle;\n","import { createComponent } from 'Component/Bundle'; // bundle模型用来异步加载组件\n\nimport Index from 'Page/index';\n\nconst routes = [\n  {\n    path: '/',\n    component: createComponent(Index),\n    exact: true,\n  },\n];\nexport default routes;\n","import * as React from 'react';\nimport api from 'utils/api';\nimport '../styles/test.less';\n\nclass Index extends React.Component {\n  constructor(props) {\n    super(props);\n  }\n  componentDidMount() {\n    api.getCity({ test: 1 }).then((res) => {\n      console.log(res.data);\n    });\n  }\n  render() {\n    return (<div styleName='demo'>如需查看demo项目，请切换分支到singleDog分支</div>);\n  }\n}\n\nexport default Index;\n","import React from 'react';\nimport ReactCSSTransitionGroup from 'react-addons-css-transition-group';\nimport { wxConfig } from '../config';\nimport { Location, History } from 'history';\n\ninterface RouteWrapperPropType {\n  location: Location;\n  history: History;\n  children: React.ReactElement<any>;\n}\n\n/**\n * 1.添加路由过渡动画\n * 2.在路由跳转时执行某些操作，比如微信sdk授权\n * 3.恢复滚动条到最顶部\n */\nclass RouteWrapper extends React.Component<RouteWrapperPropType> {\n  constructor(props) {\n    super(props);\n  }\n  componentDidUpdate(prevProps) {\n    if (this.props.location !== prevProps.location) {\n      window.scrollTo(0, 0);\n      if (window.isWX) {\n        wxConfig(); // spa跳转之后重新获取wx-sdk授权\n      }\n    }\n  }\n  render() {\n    const { location, history } = this.props;\n    const animateCls = history.action === 'PUSH' ? 'left' : 'right';\n    return (\n      <ReactCSSTransitionGroup\n        transitionName={animateCls}\n        transitionEnterTimeout={1000}\n        transitionLeaveTimeout={1000}\n        component={React.Fragment}\n      >\n        <div key={location.pathname} className='routerWrapper'>\n          {React.cloneElement(this.props.children, { location })}\n        </div>\n      </ReactCSSTransitionGroup>\n    );\n  }\n}\n\nexport default RouteWrapper;\n","export function toggleAuthStatus(isLogin: boolean) {\n  return {\n    type: 'toggleAuthStatus',\n    isLogin,\n  };\n}\n\nexport function collectErrMsg(msg: string) {\n  return {\n    type: 'errMsg',\n    msg,\n  };\n}\n\nexport function setToken(token: string) {\n  return {\n    type: 'setToken',\n    token,\n  };\n}\n","import React from 'react';\nimport { Cookies } from 'react-cookie';\nimport { tokenKey, idKey, wxidKey, wbidKey, wxAuthUrl } from '../constant';\nimport { connect } from 'react-redux';\nimport * as global from '../Action/Global';\nimport { bindActionCreators, Dispatch } from 'redux';\nimport PropTypes from 'prop-types';\nimport { AppStoreType } from '../Reducer';\n\ninterface WithLoginProps {\n  isLogin: boolean;\n  toggleAuthStatus: Function;\n  setToken: Function;\n}\n\n/**\n *\n * @param {*} force 是否强制跳转登录页面\n */\nexport const applyLogin = async force => {\n  const cookies = new Cookies();\n  if (window.isApp) {\n    await new Promise(resolve => {\n      lz.ready(resolve);\n    });\n    const r1 = await lz.getSessionUser();\n    if (!r1.id && force) {\n      const p = new Promise(resolve => {\n        lz.on('user:login', resolve);\n      });\n      lz.gotoLogin();\n      await p;\n      const token = await applyLogin(force);\n      return token;\n    }\n    cookies.set(idKey, r1.id);\n  \n    const r2 = await lz.getToken({ needRefresh: true });\n    if (r2.status === 'success') {\n      cookies.set(tokenKey, r2.token);\n      return r2.token;\n    }\n  } else if (window.isWX && !cookies.get(wxidKey)) {\n    window.location.href = `${wxAuthUrl}&cookie_key=${wxidKey}&redirectURL=${encodeURIComponent(\n      window.location.href,\n    )}`;\n  } else if (window.isWeiBo && !cookies.get(wbidKey)) {\n    window.location.href = `${wxAuthUrl}&cookie_key=${wbidKey}&redirectURL=${encodeURIComponent(\n      window.location.href,\n    )}`;\n  }\n  return ''; // 默认返回空的token\n};\n\n/**\n *\n * @param {*} force 是否强制跳转登录页面\n */\nconst WithLogin = (force = true) => (Wrapped: React.ComponentClass) => {\n  class WithLoginComponent extends (Wrapped as React.ComponentClass<WithLoginProps>) {\n    static propTypes = {\n      isLogin: PropTypes.bool.isRequired,\n    };\n    constructor(props) {\n      super(props);\n    }\n    async componentDidMount() {\n      const token = await applyLogin(force);\n      this.props.toggleAuthStatus(true);\n      this.props.setToken(token);\n    }\n    render() {\n      const { isLogin } = this.props;\n      return (isLogin ? <Wrapped {...this.props} /> : null);\n    }\n  }\n  return connect(\n    (state: AppStoreType) => ({ isLogin: state.Global.isLogin }),\n    (dispatch: Dispatch) => bindActionCreators(global, dispatch),\n  )(WithLoginComponent);\n};\n\nexport default WithLogin;\n","import React from 'react';\nimport { BrowserRouter, HashRouter, Route } from 'react-router-dom';\nimport routes from 'Route';\nimport RouteWrapper from 'Component/RouteWrapper';\nimport { renderRoutes } from 'react-router-config';\nimport { baseUrlPath } from './constant';\nimport WithLogin from 'Hoc/WithLogin';\n\nconst Router = location.hash.length > 0 ? HashRouter : BrowserRouter;\n\nconst basename = location.hash.length > 0 ? '' : baseUrlPath;\n\nclass App extends React.Component {\n  render() {\n    return (<Router basename={basename}>\n      <Route\n        render={props => (\n          <RouteWrapper {...props}>\n            {renderRoutes(routes)}\n          </RouteWrapper>\n        )}\n      />\n    </Router>);\n  }\n}\n\nexport default WithLogin(true)(App);\n","import './common';\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport { AppContainer } from 'react-hot-loader';\nimport { Provider } from 'react-redux';\nimport App from './App';\nimport store from 'Store/index';\nimport { CookiesProvider } from 'react-cookie';\n\nconst render = (Component) => {\n  const rcRender = __isomorphic__ ? ReactDOM.hydrate : ReactDOM.render;\n  rcRender(\n    <AppContainer>\n      <CookiesProvider>\n        <Provider store={store}>\n            <Component />\n        </Provider>\n      </CookiesProvider>\n    </AppContainer>,\n    document.getElementById('app') as HTMLElement,\n  );\n};\nrender(App);\n\nif (module.hot) {\n  module.hot.accept('./App', () => {\n    render(App);\n  });\n}\n","module.exports = __webpack_public_path__ + \"client/assets/share_cover.jpg?29fcd9f6aaab7c7d9bbf5071cba02195\";"],"sourceRoot":""}