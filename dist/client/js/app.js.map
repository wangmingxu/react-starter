{"version":3,"sources":["webpack:///./assets/share_cover.jpg","webpack:///./utils/ua.ts","webpack:///./config.ts","webpack:///./constant.ts","webpack:///./common.ts","webpack:///./Component/Bundle.tsx","webpack:///./utils/api.ts","webpack:///./Route/index.tsx","webpack:///./Page/index.tsx","webpack:///./Component/RouteWrapper.tsx","webpack:///./Action/global.ts","webpack:///./Store/index.ts","webpack:///./Hoc/withLogin.tsx","webpack:///./App.tsx","webpack:///./Reducer/global.ts","webpack:///./Reducer/index.ts","webpack:///./index.tsx","webpack:///./styles/test.less?b42d"],"names":["module","exports","__webpack_require__","p","ua","navigator","userAgent","lang","language","toLowerCase","isIPhone","indexOf","utils_ua","isIE","isOpera","isWebKit","isFireFox","isMobile","match","isIOS","isAndroid","isIPad","isWebApp","isWeiBo","isWeiXin","isUC","isQQ","isSafari","isLizhiFM","window","LizhiJSBridge","whichPlatform","screen","height","width","wxConfig","url","_a","location","link","protocol","host","pathname","search","axios_default","params","currentURL","then","res","data","wx","config","debug","appId","appid","timestamp","nonceStr","signature","jsApiList","cookiePrefix","wxidKey","wbidKey","wxJsConfUrl","wxAuthUrl","onWXBridgeReady","ready","onMenuShareAppMessage","shareData","onMenuShareTimeline","promise_prototype_finally_default","a","shim","fundebug_0_3_3_min_default","apikey","releasestage","interceptors","response","use","status","notifyError","Error","msg","error","Promise","reject","fastclick_default","attach","document","body","lz","index_esm","isApp","isWX","platform","documentElement","setAttribute","includes","href","title","desc","image-url","imgUrl","apiList","eventList","cs","createElement","src","common_s","getElementsByTagName","parentNode","insertBefore","onload","WeixinJSBridge","addEventListener","MutationObserver","mutations","forEach","mutation","type","docHeight","clientHeight","pageEle","Object","head","querySelectorAll","firstElementChild","pageHeight","Math","abs","scale","style","transform","observe","getElementById","childList","subtree","_hmt","hm","s","Component_Bundle","_super","Bundle","props","_this","call","this","state","mod","__extends","prototype","componentWillMount","load","componentWillReceiveProps","nextProps","di","setState","default","render","children","react","antd_mobile_es","toast","text","propTypes","prop_types","isRequired","rMap","Component","api","getCity","listLuckyDoy","trans","keys","reduce","fMap","key","assign","styles","Page","dist","Index","Page_extends","componentDidMount","test","className","demo","Route","path","component","displayName","name","react_default","LoadedComponent","__assign","exact","Component_RouteWrapper","RouteWrapper","RouteWrapper_extends","componentDidUpdate","animateCls","history","action","react_addons_css_transition_group_default","transitionName","transitionEnterTimeout","transitionLeaveTimeout","Fragment","cloneElement","toggleAuthStatus","isLogin","collectErrMsg","Hoc_withLogin","Wrapped","withLoginComponent","withLogin_extends","configReady","_t","cookies","getSessionUser","r1","id","set","getToken","needRefresh","r3","token","request","on","reload","gotoLogin","get","encodeURIComponent","withLogin_assign","prop_types_default","bool","react_cookie_lib","es","Global","dispatch","redux","Action_global_namespaceObject","Router","hash","length","react_router_dom_es","basename","App_0","App","App_extends","App_assign","react_router_config_es","__decorate","initState","errMsg","Reducer_global","global_assign","concat","Reducer","middleware","redux_logger","Store_initState","REDUX_STATE","Store","apply","rcRender","react_dom_default","hydrate","react_hot_loader","store"],"mappings":"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","file":"client/js/app.js?0ba100df00d2df35e5a8","sourcesContent":["module.exports = __webpack_public_path__ + \"client/assets/share_cover.jpg?29fcd9f6aaab7c7d9bbf5071cba02195\";","const ua = navigator.userAgent;\nconst lang = navigator.language.toLowerCase();\n\nfunction isIE() {\n  // IE内核\n  return ua.indexOf('Trident') > -1;\n}\n\nfunction isOpera() {\n  // opera内核\n  return ua.indexOf('Presto') > -1;\n}\n\nfunction isWebKit() {\n  // 苹果/谷歌内核\n  return ua.indexOf('AppleWebKit') > -1;\n}\n\nfunction isFireFox() {\n  // 火狐内核\n  return ua.indexOf('Gecko') > -1 && ua.indexOf('KHTML') == -1;\n}\n\nfunction isMobile() {\n  // 移动终端\n  return !!ua.match(/AppleWebKit.*Mobile.*/);\n}\n\nfunction isIOS() {\n  // ios终端\n  return !!ua.match(/\\(i[^;]+;( U;)? CPU.+Mac OS X/);\n}\n\nfunction isAndroid() {\n  // android终端/uc浏览器\n  return ua.indexOf('Android') > -1 || ua.indexOf('Linux') > -1;\n}\n\nfunction isIPhone() {\n  // iPhone/QQHD浏览器\n  return ua.indexOf('iPhone') > -1;\n}\n\nfunction isIPad() {\n  // iPad\n  return ua.indexOf('iPad') > -1;\n}\n\nfunction isWebApp() {\n  // web应该程序，没有头部与底部\n  return ua.indexOf('Safari') == -1;\n}\n\nfunction isWeiBo() {\n  // 微博\n  return !!ua.match(/Weibo/i);\n}\n\nfunction isWeiXin() {\n  // 微信\n  return !!ua.match(/MicroMessenger/i);\n}\n\nfunction isUC() {\n  // uc\n  return !!ua.match(/UCBrowser/i);\n}\n\nfunction isQQ() {\n  // qq\n  return !!ua.match(/QQBrowser/i);\n}\n\nfunction isSafari() {\n  // safari\n  return !!ua.match(/Safari/i);\n}\n\nfunction isLizhiFM() {\n  // lizhifm\n  if (ua.match(/LizhiFM/i) !== null) {\n    return true;\n  }\n  if (typeof (window as any).LizhiJSBridge !== 'undefined') {\n    return true;\n  }\n\n  return false;\n}\n\nfunction whichPlatform() {\n  if (isIPhone()) {\n    if (screen.height === 812 && screen.width === 375) {\n      return 'IPhoneX';\n    }\n    return 'IPhone';\n  } else if (screen.width < 768) {\n    return 'Android';\n  }\n  return 'Desktop';\n}\n\nexport default {\n  ua,\n  lang,\n  isIE,\n  isOpera,\n  isWebKit,\n  isFireFox,\n  isMobile,\n  isIOS,\n  isAndroid,\n  isIPhone,\n  isIPad,\n  isWebApp,\n  isWeiBo,\n  isWeiXin,\n  isUC,\n  isQQ,\n  isSafari,\n  isLizhiFM,\n  whichPlatform,\n};\n","import axios from 'axios';\n\nexport function wxConfig(url) {\n  const {\n    protocol, host, pathname, search,\n  } = window.location;\n  const link = `${protocol}//${host}${pathname}${search}`;\n\n  axios({\n    url,\n    params: {\n      currentURL: link,\n    },\n  }).then((res) => {\n    const { data } = res;\n\n    if (!data) {\n      return;\n    }\n\n    wx.config({\n      debug: false, // 开启调试模式,调用的所有api的返回值会在客户端alert出来，若要查看传入的参数，可以在pc端打开，参数信息会通过log打出，仅在pc端时才会打印。\n      appId: data.appid, // 必填，公众号的唯一标识\n      timestamp: data.timestamp, // 必填，生成签名的时间戳\n      nonceStr: data.nonceStr, // 必填，生成签名的随机串\n      signature: data.signature, // 必填，签名，见附录1\n      jsApiList: [\n        'checkJsApi',\n        'onMenuShareTimeline',\n        'onMenuShareAppMessage',\n        'onMenuShareQQ',\n        'onMenuShareWeibo',\n        'hideMenuItems',\n        'showMenuItems',\n        'hideAllNonBaseMenuItem',\n        'showAllNonBaseMenuItem',\n        'translateVoice',\n        'startRecord',\n        'stopRecord',\n        'onRecordEnd',\n        'playVoice',\n        'pauseVoice',\n        'stopVoice',\n        'uploadVoice',\n        'downloadVoice',\n        'chooseImage',\n        'previewImage',\n        'uploadImage',\n        'downloadImage',\n        'getNetworkType',\n        'openLocation',\n        'getLocation',\n        'hideOptionMenu',\n        'showOptionMenu',\n        'closeWindow',\n        'scanQRCode',\n        'chooseWXPay',\n        'openProductSpecificView',\n        'addCard',\n        'chooseCard',\n        'openCard',\n      ], // 必填，需要使用的JS接口列表，所有JS接口列表见附录2\n    });\n  });\n}\n\nexport function appConfig(url) {\n  (window as any).lz.config({\n    debug: false,\n    url,\n    apiList: [\n      'getToken',\n      'getSessionUser',\n      'gotoLogin',\n      'shareUrl',\n      'startRecordVoice',\n      'stopRecordVoice',\n      'uploadRecordVoice',\n      'replayRecordVoice',\n      'shareImage',\n      'saveImage',\n    ],\n    eventList: ['user:login', 'recordStateChange'],\n  });\n}\n","export const cookiePrefix = 'base_cityfm_hangzhou_single_dog_';\nexport const tokenKey = `${cookiePrefix}token`;\nexport const idKey = `${cookiePrefix}id`;\nexport const wxidKey = `${cookiePrefix}wxid`;\nexport const wbidKey = `${cookiePrefix}wbid`;\n\nexport const wxJsConfUrl = '//oauthbiz.lizhi.fm/weixin/jsconfig?tag=cityfm';\nexport const wxAuthUrl = '//oauthbiz.lizhi.fm/weixin/auth?tag=cityfm';\nexport const lzAuthUrl = 'https://h5security.lizhi.fm/jsBridgeConfig/get';\nexport const fundebugApiKey = '294a8593da2207207c592dcd7364e84e913b366ca32bd592002dfc068c568f58';\nexport const baiduTongjiID = '50f7f3f779102291f22b776ad51e5893';\n\nexport const baseUrlPath = process.env.NODE_ENV === 'production' ? '/hangzhou/singleDog' : '/';\n","import 'babel-polyfill';\nimport './styles/global.less';\nimport FastClick from 'fastclick';\nimport client from './utils/ua';\nimport lz from '@lizhife/lz-jssdk';\nimport { wxConfig, appConfig } from './config';\nimport {\n  lzAuthUrl,\n  wxJsConfUrl,\n  fundebugApiKey,\n  baiduTongjiID,\n} from './constant';\nimport fundebug from 'fundebug-javascript';\nimport axios from 'axios';\nimport promiseFinally from 'promise.prototype.finally';\nimport first from 'lodash-es/first';\n\npromiseFinally.shim();\n\nfundebug.apikey = fundebugApiKey;\nfundebug.releasestage = process.env.NODE_ENV;\n// console.log(process.env.NODE_ENV);\n\n// 添加响应拦截器\naxios.interceptors.response.use(\n  (response) => {\n    if (response.data.status !== 0) {\n      fundebug.notifyError(new Error(response.data.msg));\n    }\n    return response.data;\n  },\n  error =>\n    Promise.reject(error),\n);\n\nFastClick.attach(document.body);\n\n(window as any).lz = lz;\n(window as any).isApp = client.isLizhiFM();\n(window as any).isWX = client.isWeiXin();\n(window as any).isWeiBo = client.isWeiBo();\n(window as any).platform = client.whichPlatform();\ndocument.documentElement.setAttribute('data-platform', (window as any).platform);\n(window as any).debug = location.search.includes('debug');\n// (window as any).debug && import('eruda').then((eruda) => { eruda.init(); });\n\n(window as any).shareData = {\n  url: window.location.href,\n  link: window.location.href,\n  title: '全国单身踢馆歌手大赛',\n  desc: '妈耶！单身汪怎么可以手撕情侣档？画面惨不忍睹……',\n  'image-url': require('./assets/share_cover.jpg'),\n  imgUrl: require('./assets/share_cover.jpg'),\n};\n\n// console.log(window.shareData);\n\nif ((window as any).isApp) {\n  appConfig(lzAuthUrl);\n}\n\nfunction onWXBridgeReady() {\n  wxConfig(wxJsConfUrl);\n  wx.ready(() => {\n    wx.onMenuShareAppMessage((window as any).shareData);\n    wx.onMenuShareTimeline((window as any).shareData);\n  });\n}\nif ((window as any).isWX) {\n  const cs = document.createElement('script');\n  cs.src = '//res.wx.qq.com/open/js/jweixin-1.2.0.js';\n  const s = document.getElementsByTagName('script')[0];\n  s.parentNode.insertBefore(cs, s);\n  cs.onload = () => {\n    if (typeof WeixinJSBridge === 'undefined') {\n      document.addEventListener('WeixinJSBridgeReady', onWXBridgeReady, false);\n    } else {\n      onWXBridgeReady();\n    }\n  };\n}\n\nconst observer = new MutationObserver(((mutations) => {\n  mutations.forEach((mutation) => {\n    // console.log(mutation.type);\n    if (mutation.type === 'childList') {\n      const docHeight = document.documentElement.clientHeight;\n      const _wrapperEle = first(document.querySelectorAll('.routerWrapper'));\n      const pageEle = _wrapperEle.firstElementChild;\n      const pageHeight = pageEle.clientHeight;\n      const offsetHeight = Math.abs(pageHeight - docHeight);\n      if (offsetHeight > 150) return;\n      const scale = docHeight / pageHeight;\n      (pageEle as any).style['transform-origin'] = '0 0';\n      (pageEle as any).style.transform = `scaleY(${scale})`;\n    }\n  });\n}));\nobserver.observe(document.getElementById('app'), {\n  childList: true,\n  subtree: true,\n});\n\n(window as any)._hmt = (window as any)._hmt || [];\n(function () {\n  const hm = document.createElement('script');\n  hm.src = `https://hm.baidu.com/hm.js?${baiduTongjiID}`;\n  const s = document.getElementsByTagName('script')[0];\n  s.parentNode.insertBefore(hm, s);\n}());\n","import * as React from 'react';\nimport * as PropTypes from 'prop-types';\nimport { ActivityIndicator } from 'antd-mobile';\n\ninterface BundlePropType{\n  load: (args:any)=>void;\n  children: (args:React.ComponentType)=>JSX.Element;\n}\n\ninterface BundleStateType{\n  mod: React.ComponentType;\n}\n\nclass Bundle extends React.Component<BundlePropType,BundleStateType> {\n  static propTypes = {\n    load: PropTypes.func.isRequired,\n    children: PropTypes.func.isRequired,\n  };\n  constructor(props) {\n    super(props);\n    this.state = {\n      // short for \"module\" but that's a keyword in js, so \"mod\"\n      mod: null,\n    };\n  }\n  componentWillMount() {\n    this.load(this.props);\n  }\n\n  componentWillReceiveProps(nextProps) {\n    if (nextProps.load !== this.props.load) {\n      this.load(nextProps);\n    }\n  }\n\n  load(di:BundlePropType) {\n    this.setState({\n      mod: null,\n    });\n    // 加载完bundle-loader之后cb\n    di.load((mod) => {\n      this.setState({\n        // handle both es imports and cjs\n        mod: mod.default ? mod.default : mod,\n      });\n    });\n  }\n\n  render() {\n    return this.state.mod ? this.props.children(this.state.mod) : (<ActivityIndicator toast text=\"Loading...\" />);\n  }\n}\n\nexport default Bundle;\n","import axios, { AxiosPromise } from 'axios';\n\ntype ApiMap = {\n  getCity: string | Object;\n  listLuckyDoy: string | Object;\n  trans: string | Object;\n};\n\ntype axiosMap<T> = { [P in keyof T]?: (args: any) => AxiosPromise<any> };\n\nfunction apiConfig<T>(rMap: T) {\n  return Object.keys(rMap).reduce<axiosMap<T>>((fMap, key) => {\n    fMap[key] = data => {\n      if (typeof rMap[key] === 'string') {\n        return axios({ url: rMap[key], params: data });\n      }\n      return axios(Object.assign(rMap[key], { data }));\n    };\n    return fMap;\n  }, {});\n}\n\nconst API = apiConfig<ApiMap>({\n  getCity: '/hangzhou/singleDog/getCity', //get\n  // getCity: {\n  //   url: '/hangzhou/singleDog/getCity', // post\n  //   method: 'post',\n  // },\n  listLuckyDoy: '/activity/listLuckyDoy',\n  trans: '//oauthbiz.lizhi.fm/checkAppTrans',\n});\n\nexport default API;\n","import React from 'react';\nimport Bundle from '../Component/Bundle'; // bundle模型用来异步加载组件\n\nimport Index from '../Page/index';\n\n// components load their module for initial visit\n// 这里只是给this.props.child传一个方法，最后在Bundle的render里面调用\n// 如果传入的就是组件的话就直接返回,兼容服务端渲染\nconst createComponent = Component =>\n  ((Component.displayName || Component.name)\n    ? Component\n    : props => (\n      <Bundle load={Component}>\n        {LoadedComponent => <LoadedComponent {...props} />}\n      </Bundle>\n    ));\n\nconst routes = [\n  {\n    path: '/',\n    component: createComponent(Index),\n    exact: true,\n  },\n];\nexport default routes;\n","import * as React from 'react';\nimport API from '../utils/api';\nimport * as CSSModules from 'react-css-modules';\nconst styles:any = require('../styles/test.less');\n\nclass Index extends React.Component {\n  constructor(props) {\n    super(props);\n  }\n  componentDidMount() {\n    API.getCity({ test: 1 });\n  }\n  render() {\n    return (<div className={styles.demo}>如需查看demo项目，请切换分支到singleDog分支</div>);\n  }\n}\n\nexport default CSSModules(Index, styles);\n","import React from 'react';\nimport ReactCSSTransitionGroup from 'react-addons-css-transition-group';\nimport { wxConfig } from '../config';\nimport { wxJsConfUrl } from '../constant';\nimport {Location,History} from 'history';\n\ninterface RouteWrapperPropType{\n  location: Location;\n  history:History;\n  children: React.ReactElement<any>\n}\n\n/**\n * 1.添加路由过渡动画\n * 2.在路由跳转时执行某些操作，比如微信sdk授权\n */\nclass RouteWrapper extends React.Component<RouteWrapperPropType> {\n  constructor(props) {\n    super(props);\n  }\n  componentDidUpdate() {\n    if ((window as any).isWX) {\n      wxConfig(wxJsConfUrl); // spa跳转之后重新获取wx-sdk授权\n    }\n  }\n  render() {\n    const { location, history } = this.props;\n    const animateCls = history.action === 'PUSH' ? 'left' : 'right';\n    return (\n      <ReactCSSTransitionGroup\n        transitionName={animateCls}\n        transitionEnterTimeout={1000}\n        transitionLeaveTimeout={1000}\n        component={React.Fragment}\n      >\n        <div key={location.pathname} className=\"routerWrapper\">\n          {React.cloneElement(this.props.children, { location })}\n        </div>\n      </ReactCSSTransitionGroup>\n    );\n  }\n}\n\nexport default RouteWrapper;\n","export function toggleAuthStatus(isLogin) {\n  return {\n    type: 'toggleAuthStatus',\n    isLogin,\n  };\n}\n\nexport function collectErrMsg(msg) {\n  return {\n    type: 'errMsg',\n    msg,\n  };\n}\n","import { createStore, applyMiddleware, compose } from 'redux';\n// import thunk from 'redux-thunk';\nimport { createLogger } from 'redux-logger';\nimport rootReducer from '../Reducer';\n\nconst logger = createLogger();\n\n// const middleware = [thunk].concat(process.env.NODE_ENV === 'development' ? [logger] : []);\nconst middleware = [logger];\n\nconst initState = typeof window === 'object' ? (window as any).REDUX_STATE : {};\n\nexport const configureStore = (state) => {\n  const store = createStore(\n    rootReducer,\n    state || {},\n    compose(applyMiddleware(...middleware)),\n  );\n\n  if (module.hot) {\n    module.hot.accept('../Reducer', () => {\n      store.replaceReducer(rootReducer);\n    });\n  }\n  return store;\n};\n\nexport default configureStore(initState);\n","import React from 'react';\nimport lz from '@lizhife/lz-jssdk';\nimport { withCookies,Cookies } from 'react-cookie';\nimport { tokenKey, idKey, wxidKey, wbidKey, wxAuthUrl } from '../constant';\nimport { connect } from 'react-redux';\nimport * as global from '../Action/global';\nimport { bindActionCreators,Dispatch } from 'redux';\nimport axios from 'axios';\nimport get from 'lodash-es/get';\nimport PropTypes,{instanceOf} from 'prop-types';\nimport {AppStoreType} from '../Reducer';\n\ninterface withLoginProps{\n  isLogin: boolean;\n  cookies: Cookies;\n  toggleAuthStatus: Function\n}\n\nconst withLogin = (Wrapped: React.ComponentType<any>)=>{\n  class withLoginComponent extends React.Component<withLoginProps> {\n    static propTypes = {\n      isLogin: PropTypes.bool.isRequired,\n      cookies: instanceOf(Cookies).isRequired\n    }\n    constructor(props) {\n      super(props);\n    }\n    componentDidMount() {\n      this.configReady();\n    }\n    configReady() {\n      const _t = this;\n      const { cookies } = _t.props;\n      if ((window as any).isApp) {\n        lz.ready(() => {\n          lz.getSessionUser().then((r1) => {\n            if (!r1.id) {\n              lz.on('user:login', () => {\n                window.location.reload();\n              });\n\n              lz.gotoLogin();\n            } else {\n              cookies.set(idKey, r1.id);\n              lz\n                .getToken({\n                  needRefresh: true,\n                })\n                .then((r3) => {\n                  if (r3.status === 'success') {\n                    cookies.set(tokenKey, r3.token);\n                    _t.props.toggleAuthStatus(true);\n                    axios.interceptors.request.use(config =>\n                      Object.assign(config, {\n                        params: Object.assign(config.params || {}, { token: r3.token }),\n                      }));\n                  }\n                });\n            }\n          });\n        });\n      } else if ((window as any).isWX && !cookies.get(wxidKey)) {\n        window.location.href = `${wxAuthUrl}&cookie_key=${wxidKey}&redirectURL=${encodeURIComponent(window.location.href)}`;\n      } else if ((window as any).isWeiBo && !cookies.get(wbidKey)) {\n        window.location.href = `${wxAuthUrl}&cookie_key=${wbidKey}&redirectURL=${encodeURIComponent(window.location.href)}`;\n      } else {\n        _t.props.toggleAuthStatus(true);\n      }\n    }\n    render() {\n      const { isLogin } = this.props;\n      return isLogin ? <Wrapped {...this.props} /> : null;\n    }\n  }\n  return withCookies(connect(\n    (state:AppStoreType) => ({ isLogin: state.Global.isLogin }),\n    (dispatch: Dispatch) => bindActionCreators(global, dispatch),\n  )(withLoginComponent));\n};\n\nexport default withLogin;","import React from 'react';\nimport { BrowserRouter, HashRouter, Route } from 'react-router-dom';\nimport routes from './Route';\nimport RouteWrapper from './Component/RouteWrapper';\nimport { renderRoutes } from 'react-router-config';\nimport { baseUrlPath } from './constant';\nimport withLogin from './Hoc/withLogin';\nimport {withCookies} from 'react-cookie';\n\nconst Router = location.hash.length > 0 ? HashRouter : BrowserRouter;\n\nconst basename = location.hash.length > 0 ? '' : baseUrlPath;\n\n@(withLogin as any)\nclass App extends React.Component<{},{}> {\n  render() {\n    return (<Router basename={basename}>\n      <Route\n        render={props => (\n          <RouteWrapper {...props}>\n            {renderRoutes(routes)}\n          </RouteWrapper>\n        )}\n      />\n    </Router>);\n  }\n}\n\nexport default App;\n","export interface GlobalStateType {\n  isLogin: boolean;\n  errMsg: string[];\n}\n\nconst initState:GlobalStateType = {\n  isLogin: typeof exports === 'object', // 如果是服务端渲染则设置初始值为true,在服务端获取api失败时置为false\n  errMsg: [],\n};\nconst Global = (state = initState, action) => {\n  switch (action.type) {\n  case 'toggleAuthStatus':\n    return {\n      ...state,\n      isLogin: action.isLogin,\n    };\n  case 'errMsg':\n    return {\n      ...state,\n      errMsg: [...state.errMsg, action.msg],\n    };\n  default:\n    return state;\n  }\n};\n\nexport default Global;\n","import { combineReducers } from 'redux';\nimport Global,{GlobalStateType} from './global';\n\nexport interface AppStoreType{\n  Global: GlobalStateType\n}\n\nconst rootReducer = combineReducers({\n  Global,\n});\n\nexport default rootReducer;\n","import './common';\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport { AppContainer } from 'react-hot-loader';\nimport { Provider } from 'react-redux';\nimport App from './App';\n// import App from './Component/RouteWrapper';\nimport store from './Store/index';\nimport { CookiesProvider } from 'react-cookie';\n\nconst render = (Component) => {\n  const rcRender = __isomorphic__ ? ReactDOM.hydrate : ReactDOM.render\n  rcRender(\n    <AppContainer>\n      <CookiesProvider>\n        <Provider store={store}>\n            <Component />\n        </Provider>\n      </CookiesProvider>\n    </AppContainer>,\n    document.getElementById('app') as HTMLElement,\n  );\n};\nrender(App);\n\nif (module.hot) {\n  module.hot.accept('./App', () => {\n    render(App);\n  });\n}\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"demo\":\"test__demo--3wukP\"};"],"sourceRoot":""}