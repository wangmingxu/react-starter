(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{114:function(e,t,n){e.exports=n.p+"client/assets/share_cover.jpg?29fcd9f6aaab7c7d9bbf5071cba02195"},289:function(e,t,n){"use strict";n.r(t);var o={};n.r(o),n.d(o,"toggleAuthStatus",function(){return re}),n.d(o,"collectErrMsg",function(){return ie}),n.d(o,"setToken",function(){return ae});n(58),n(95),n(96),n(98),n(68),n(164);var r=n(136),i=n.n(r),a=(n(106),navigator.userAgent),c=navigator.language.toLowerCase();function s(){return a.indexOf("iPhone")>-1}var u={ua:a,lang:c,isIE:function(){return a.indexOf("Trident")>-1},isOpera:function(){return a.indexOf("Presto")>-1},isWebKit:function(){return a.indexOf("AppleWebKit")>-1},isFireFox:function(){return a.indexOf("Gecko")>-1&&-1===a.indexOf("KHTML")},isMobile:function(){return!!a.match(/AppleWebKit.*Mobile.*/)},isIOS:function(){return!!a.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/)},isAndroid:function(){return a.indexOf("Android")>-1||a.indexOf("Linux")>-1},isIPhone:s,isIPad:function(){return a.indexOf("iPad")>-1},isWebApp:function(){return-1===a.indexOf("Safari")},isWeiBo:function(){return!!a.match(/Weibo/i)},isWeiXin:function(){return!!a.match(/MicroMessenger/i)},isUC:function(){return!!a.match(/UCBrowser/i)},isQQ:function(){return!!a.match(/QQBrowser/i)},isSafari:function(){return!!a.match(/Safari/i)},isLizhiFM:function(){return null!==a.match(/LizhiFM/i)||"undefined"!=typeof LizhiJSBridge},selectPlatform:function(){return s()?[812,724,690].includes(screen.height)&&375===screen.width?"IPhoneX":"IPhone":screen.width<768?"Android":"Desktop"}},l=n(51),p=n.n(l),f="base_cityfm_hangzhou_single_dog_",d=f+"wxid",h=f+"wbid",g="//oauthbiz.lizhi.fm/weixin/jsconfig?tag=cityfm",m="//oauthbiz.lizhi.fm/weixin/auth?tag=cityfm",w="https://h5security.lizhi.fm/jsBridgeConfig/get";function y(){var e=window.location,t=e.protocol+"//"+e.host+e.pathname+e.search;p()({url:g,params:{currentURL:t}}).then(function(e){var t=e.data.data;t&&wx.config({debug:!1,appId:t.appid,timestamp:t.timestamp,nonceStr:t.nonceStr,signature:t.signature,jsApiList:["checkJsApi","onMenuShareTimeline","onMenuShareAppMessage","onMenuShareQQ","onMenuShareWeibo","hideMenuItems","showMenuItems","hideAllNonBaseMenuItem","showAllNonBaseMenuItem","translateVoice","startRecord","stopRecord","onRecordEnd","playVoice","pauseVoice","stopVoice","uploadVoice","downloadVoice","chooseImage","previewImage","uploadImage","downloadImage","getNetworkType","openLocation","getLocation","hideOptionMenu","showOptionMenu","closeWindow","scanQRCode","chooseWXPay","openProductSpecificView","addCard","chooseCard","openCard"]})})}n(185),n(186),n(187),n(112),n(193);var b,v=p.a.create(),_="status",O="msg";!function(e){e[e.SUCCESS=0]="SUCCESS",e[e.NO_LOGIN=2]="NO_LOGIN"}(b||(b={})),v.interceptors.response.use(function(e){return Promise.resolve(e.data)},function(e){return Promise.reject(e)}),v.interceptors.response.use(function(e){var t=O;return e[_]===b.SUCCESS?Promise.resolve(e):Promise.reject(e[t])},function(e){return Promise.reject(e)});var S=["GET","POST","PUT","DELETE"];var k=function(e){return Object.keys(e).reduce(function(t,n){return t[n]=function(t,o){var r;if(void 0===o&&(o={}),"string"==typeof e[n]){if(S.some(function(t){return e[n].startsWith(t)})){var i=e[n].split(" "),a=i[0],c=i[1];return v.request(Object.assign(o,((r={url:c,method:a})["GET"===a.toUpperCase()?"params":"data"]=t,r)))}return v.request(Object.assign(o,{url:e[n],params:t}))}return v.request(Object.assign(e[n],{data:t}))},t},{})}({getCity:"GET /hangzhou/singleDog/getCity",listLuckyDoy:"POST /activity/listLuckyDoy",trans:"GET //oauthbiz.lizhi.fm/checkAppTrans"}),P=n(8),E=n(137),j=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},L={isLogin:"object"==typeof exports,errMsg:[],token:""},M=function(e,t){switch(void 0===e&&(e=L),t.type){case"toggleAuthStatus":return j({},e,{isLogin:t.isLogin});case"errMsg":return j({},e,{errMsg:e.errMsg.concat([t.msg])});case"setToken":return j({},e,{token:t.token});default:return e}},C=Object(P.c)({Global:M}),x=[Object(E.createLogger)()],A=function(e){return Object(P.e)(C,e||{},Object(P.d)(P.a.apply(void 0,x)))}("object"==typeof window?window.REDUX_STATE:{}),T=n(146);function z(){y(),wx.ready(function(){wx.onMenuShareAppMessage(window.shareData),wx.onMenuShareTimeline(window.shareData)})}new Promise(function(e){n.e(5).then(function(t){e(n(295))}.bind(null,n)).catch(n.oe)}).then(function(e){e.apikey="294a8593da2207207c592dcd7364e84e913b366ca32bd592002dfc068c568f58",e.releasestage="production",e.sampleRate=.3,e.silentHttp=!0,e.filters=[{message:/^Script error\.$/},{message:/Network Error/},{message:/JSBridge/},{target:{tagName:/^IMG$/}}]}),i.a.attach(document.body),window.isApp=u.isLizhiFM(),window.isWX=u.isWeiXin(),window.isWeiBo=u.isWeiBo(),window.platform=u.selectPlatform(),document.documentElement.setAttribute("data-platform",window.platform),window.debug=location.search.includes("debug"),window.isPre=location.host.includes("pre")||location.search.includes("pre"),v.interceptors.request.use(function(e){var t;if(window.isApp){var n="get"===e.method?"params":"data";Object.assign(e,((t={})[n]=Object.assign(e[n]||{},{token:Object(T.a)(A.getState(),["Global","token"])}),t))}return e}),window.shareData={url:window.location.href,link:window.location.href,title:"全国单身踢馆歌手大赛",desc:"妈耶！单身汪怎么可以手撕情侣档？画面惨不忍睹……","image-url":n(114),imgUrl:n(114)},window.isApp&&(lz.config({debug:!1,url:w,apiList:["getToken","getSessionUser","gotoLogin","shareUrl","startRecordVoice","stopRecordVoice","uploadRecordVoice","replayRecordVoice","shareImage","saveImage"],eventList:["user:login","recordStateChange"]}),lz.ready(function(){LizhiJSBridge.call("configShareUrl",{url:window.shareData.url,title:window.shareData.title,desc:window.shareData.desc,"image-url":window.shareData.imgUrl},function(e){console.log(e)})})),window.isWX&&("undefined"==typeof WeixinJSBridge?document.addEventListener("WeixinJSBridgeReady",z,!1):z()),window._hmt=window._hmt||[],function(){var e=document.createElement("script");e.src="https://hm.baidu.com/hm.js?50f7f3f779102291f22b776ad51e5893";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}();var W=n(0),I=n.n(W),U=n(86),R=n.n(U),D=n(140),B=n(55),N=(n(38),n(293)),G=n(294),V=n(296),X=(n(211),n(212),n(141)),J=n.n(X),q=n(1),Q=n.n(q),F=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),K=function(e){function t(t){var n=e.call(this,t)||this;return n.state={mod:null},n}return F(t,e),t.prototype.componentWillMount=function(){this.load(this.props)},t.prototype.componentWillReceiveProps=function(e){e.load!==this.props.load&&this.load(e)},t.prototype.load=function(e){var t=this;this.setState({mod:null}),e.load(function(e){t.setState({mod:e.default?e.default:e})})},t.prototype.render=function(){return this.state.mod?this.props.children(this.state.mod):W.createElement(J.a,{toast:!0,text:"Loading..."})},t.propTypes={load:q.func.isRequired,children:q.func.isRequired},t}(W.Component),H=(n(263),function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}()),$=[{path:"/",component:function(e){return e.displayName||e.name?e:function(t){return W.createElement(K,{load:e},function(e){return W.createElement(e,t)})}}(function(e){function t(t){var n=e.call(this,t)||this;return n.getCity=function(){k.getCity({test:1}).then(function(e){console.log(e.data)})},n}return H(t,e),t.prototype.componentDidMount=function(){this.getCity()},t.prototype.render=function(){return W.createElement("div",{className:"test__demo--3wukP"},"如需查看demo项目，请切换分支到singleDog分支")},t}(W.Component)),exact:!0}],Y=n(142),Z=n.n(Y),ee=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),te=function(e){function t(t){return e.call(this,t)||this}return ee(t,e),t.prototype.componentDidUpdate=function(e){this.props.location!==e.location&&(window.scrollTo(0,0),window.isWX&&y())},t.prototype.render=function(){var e=this.props,t=e.location,n="PUSH"===e.history.action?"left":"right";return I.a.createElement(Z.a,{transitionName:n,transitionEnterTimeout:1e3,transitionLeaveTimeout:1e3,component:I.a.Fragment},I.a.createElement("div",{key:t.pathname,className:"routerWrapper"},I.a.cloneElement(this.props.children,{location:t})))},t}(I.a.Component),ne=n(147),oe=(n(276),n(277),n(53));function re(e){return{type:"toggleAuthStatus",isLogin:e}}function ie(e){return{type:"errMsg",msg:e}}function ae(e){return{type:"setToken",token:e}}var ce=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),se=function(e,t,n,o){return new(n||(n=Promise))(function(r,i){function a(e){try{s(o.next(e))}catch(e){i(e)}}function c(e){try{s(o.throw(e))}catch(e){i(e)}}function s(e){e.done?r(e.value):new n(function(t){t(e.value)}).then(a,c)}s((o=o.apply(e,t||[])).next())})},ue=function(e,t){var n,o,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(i){return function(c){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,o=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,c])}}},le=function(e){return void 0===e&&(e=!0),function(t){var n=function(n){function o(e){return n.call(this,e)||this}return ce(o,n),o.prototype.componentDidMount=function(){return se(this,void 0,void 0,function(){var t;return ue(this,function(n){switch(n.label){case 0:return[4,function e(t){return se(void 0,void 0,void 0,function(){var n,o,r,i;return ue(this,function(a){switch(a.label){case 0:return n=new oe.Cookies,window.isApp?[4,new Promise(function(e){lz.ready(e)})]:[3,7];case 1:return a.sent(),[4,lz.getSessionUser()];case 2:return(o=a.sent()).id||!t?[3,5]:(r=new Promise(function(e){lz.on("user:login",e)}),lz.gotoLogin(),[4,r]);case 3:return a.sent(),[4,e(t)];case 4:return[2,a.sent()];case 5:return n.set("base_cityfm_hangzhou_single_dog_id",o.id),[4,lz.getToken({needRefresh:!0})];case 6:return"success"===(i=a.sent()).status?(n.set("base_cityfm_hangzhou_single_dog_token",i.token),[2,i.token]):[3,8];case 7:window.isWX&&!n.get(d)?window.location.href=m+"&cookie_key="+d+"&redirectURL="+encodeURIComponent(window.location.href):window.isWeiBo&&!n.get(h)&&(window.location.href=m+"&cookie_key="+h+"&redirectURL="+encodeURIComponent(window.location.href)),a.label=8;case 8:return[2,""]}})})}(e)];case 1:return t=n.sent(),this.props.toggleAuthStatus(!0),this.props.setToken(t),[2]}})})},o.prototype.render=function(){return this.props.isLogin?I.a.createElement(t,this.props):null},o.propTypes={isLogin:Q.a.bool.isRequired},o}(t);return Object(B.b)(function(e){return{isLogin:e.Global.isLogin}},function(e){return Object(P.b)(o,e)})(n)}},pe=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),fe=location.hash.length>0?N.a:G.a,de=location.hash.length>0?"":"/hangzhou/singleDog",he=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return pe(t,e),t.prototype.render=function(){return I.a.createElement(fe,{basename:de},I.a.createElement(V.a,{render:function(e){return I.a.createElement(te,e,Object(ne.a)($))}}))},t}(I.a.Component);!function(e){(0,R.a.render)(I.a.createElement(D.AppContainer,null,I.a.createElement(oe.CookiesProvider,null,I.a.createElement(B.a,{store:A},I.a.createElement(e,null)))),document.getElementById("app"))}(le(!0)(he))}},[[289,1,0,4]]]);
//# sourceMappingURL=app.js.map?ddc84c14ccf8e958fb59